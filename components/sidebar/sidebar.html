<!-- 
    The following classes handle mobile responsiveness:
    - The sidebar is 'fixed' and hidden off-screen ('-translate-x-full') on mobile.
    - It uses 'sm:relative sm:translate-x-0' to appear as a standard column on desktop.
    - The JS toggles 'translate-x-0' to open the drawer on small screens.
-->
<div class="flex min-h-screen relative overflow-hidden">
    
    <!-- Mobile Backdrop/Overlay (Hidden on sm+) -->
    <div id="backdrop" 
         class="fixed inset-0 bg-black/50 z-30 transition-opacity duration-300 opacity-0 pointer-events-none sm:hidden"
         onclick="toggleSidebar()">
    </div>

    <!-- Sidebar / Drawer -->
    <div id="sidebar" 
         class="w-64 shadow-2xl flex flex-col p-4 bg-white z-40 h-full 
                fixed inset-y-0 left-0 flex-shrink-0
                transform -translate-x-full transition-transform duration-300 ease-in-out
                sm:relative sm:translate-x-0 sm:shadow-xl">
        
        <!-- Close Button (Mobile Only) -->
        <div class="flex justify-end sm:hidden mb-4">
            <button onclick="toggleSidebar()" class="p-2 rounded-full text-gray-600 hover:bg-gray-100">
				{% heroicon_mini "x-mark" %}
            </button>
        </div>

        <nav class="flex-grow">
            <ul class="space-y-2">
                {% slot "sidebar_content" %}
                {% endslot %}
            </ul>
        </nav>
    </div>

    <div class="flex-1 min-w-0">
        <div class="fab sm:hidden">
            <button onclick="toggleSidebar()" class="p-2 rounded-lg bg-white text-gray-700 hover:bg-gray-100">
				{% heroicon_mini "bars-3" %}
            </button>
        </div>

            {% slot "default" %}
            {% endslot %}
    </div>
</div>

<!-- Essential JS for toggling the drawer, should be included with the component logic -->
<script>
    function toggleSidebar() {
        const sidebar = document.getElementById('sidebar');
        const backdrop = document.getElementById('backdrop');

        // Check for 'translate-x-0' to determine if it's open
        const isOpen = sidebar.classList.contains('translate-x-0');

        if (isOpen) {
            // Close: Hide sidebar and backdrop
            sidebar.classList.remove('translate-x-0');
            sidebar.classList.add('-translate-x-full');
            backdrop.classList.remove('opacity-100', 'pointer-events-auto');
            backdrop.classList.add('opacity-0', 'pointer-events-none');
        } else {
            // Open: Show sidebar and backdrop
            sidebar.classList.remove('-translate-x-full');
            sidebar.classList.add('translate-x-0');
            backdrop.classList.remove('opacity-0', 'pointer-events-none');
            backdrop.classList.add('opacity-100', 'pointer-events-auto');
        }
    }
</script>
